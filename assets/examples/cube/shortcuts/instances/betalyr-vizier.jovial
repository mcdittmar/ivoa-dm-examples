def modelsFolder = "file:../models"
def stcModelsFolder = "file:../../../stc2/shortcuts/models"
def voluteFolder = "https://volute.g-vo.org/svn/trunk/projects/dm/vo-dml/models/"

def coordsLocation = new URL("$stcModelsFolder/STC_coords-v2.0.vo-dml.xml")
def measLocation = new URL("$stcModelsFolder/STC_meas-v2.0.vo-dml.xml")
def ivoaLocation = new URL("$voluteFolder/ivoa/vo-dml/IVOA-v1.0.vo-dml.xml")
def cubeLocation =  new URL("$modelsFolder/Cube-1.0.vo-dml.xml")
def datasetLocation = new URL("$modelsFolder/DatasetMetadata-1.0.vo-dml.xml")

dmInstance {
    model(vodmlURL: coordsLocation)
    model(vodmlURL: measLocation)
    model(vodmlURL: ivoaLocation)
    model(vodmlURL: cubeLocation)
    model(vodmlURL: datasetLocation)

    jdjData = [2452782.482, 2452804.427, 2452809.369, 2452832.392, 2452834.374, 2452836.416,
               2452839.448, 2452840.414, 2452841.375, 2452842.375, 2452843.342, 2452866.324,
               2452867.367, 2452869.331, 2452891.329, 2452892.302, 2453193.384, 2453194.466,
               2453214.338, 2453215.41, 2453216.376, 2453217.398, 2453218.37, 2453219.375,
               2453222.302, 2453223.366, 2453224.383, 2453225.327, 2453226.312, 2453283.219,
               2453307.178, 2453311.17, 2453486.499]
    jmagData = [Float.NaN, 3.2149999141693115, 3.3540000915527344, 3.4609999656677246,
                3.684999942779541, 3.2279999256134033, 3.497999906539917, 3.6630001068115234,
                3.3350000381469727, 3.2330000400543213, 3.2019999027252197, 3.638000011444092,
                3.3320000171661377, 3.1689999103546143, 3.5460000038146973,
                3.6540000438690186, 3.2219998836517334, 3.3910000324249268,
                3.4579999446868896, 3.7019999027252197, 3.447999954223633, 3.3010001182556152,
                3.2090001106262207, 3.299999952316284, 3.9200000762939453, 3.444999933242798,
                3.247999906539917, 3.3010001182556152, 3.315999984741211, 3.263000011444092,
                3.3910000324249268, 3.4779999256134033, 3.496000051498413]
    jmagErrData = [Float.NaN, 0.004999999888241291, 0.00800000037997961, 0.004000000189989805,
                   0.003000000026077032, 0.006000000052154064, 0.004000000189989805,
                   0.004000000189989805, 0.003000000026077032, 0.007000000216066837,
                   0.004999999888241291, 0.003000000026077032, 0.003000000026077032,
                   0.0010000000474974513, 0.006000000052154064, 0.003000000026077032,
                   0.004000000189989805, 0.00800000037997961, 0.003000000026077032,
                   0.008999999612569809, 0.004999999888241291, 0.008999999612569809,
                   0.008999999612569809, 0.009999999776482582, 0.05000000074505806,
                   0.004999999888241291, 0.00800000037997961, 0.0020000000949949026,
                   0.007000000216066837, 0.014000000432133675, 0.014000000432133675,
                   0.009999999776482582, 0.0010000000474974513]
    jdhData = [2452782.462, 2452804.419, 2452809.361, 2452832.393, 2452834.363, 2452836.416,
               2452839.449, 2452840.415, 2452841.376, 2452842.376, 2452843.335, 2452866.325,
               2452867.368, 2452869.332, 2452891.329, 2452892.303, 2453193.376, 2453194.467,
               2453214.339, 2453215.41, 2453216.377, 2453217.398, 2453218.37, 2453219.376,
               2453222.303, 2453223.367, 2453224.384, 2453225.328, 2453226.314, 2453283.22,
               2453307.179, 2453311.171, 2453486.5]
    hmagData = [3.5769999027252197, 3.1449999809265137, 3.308000087738037, 3.3929998874664307,
                3.6050000190734863, 3.1679999828338623, 3.4560000896453857, 3.621999979019165,
                3.2760000228881836, 3.1440000534057617, 3.117000102996826, 3.5969998836517334,
                3.2939999103546143, 3.109999895095825, 3.5190000534057617, 3.5989999771118164,
                3.1519999504089355, 3.3329999446868896, 3.3940000534057617,
                3.6470000743865967, 3.382999897003174, 3.2360000610351562, 3.1710000038146973,
                3.2070000171661377, 3.822000026702881, 3.3529999256134033, 3.177999973297119,
                3.2239999771118164, 3.2929999828338623, 3.128000020980835, 3.2880001068115234,
                3.369999885559082, 3.440999984741211]
    hmagErrData = [0.012000000104308128, 0.004999999888241291, 0.006000000052154064,
                   0.006000000052154064, 0.006000000052154064, 0.007000000216066837,
                   0.004000000189989805, 0.007000000216066837, 0.004000000189989805,
                   0.004000000189989805, 0.00800000037997961, 0.004999999888241291,
                   0.004999999888241291, 0.007000000216066837, 0.006000000052154064,
                   0.004999999888241291, 0.004999999888241291, 0.009999999776482582,
                   0.007000000216066837, 0.008999999612569809, 0.008999999612569809,
                   0.004999999888241291, 0.006000000052154064, 0.00800000037997961,
                   0.009999999776482582, 0.006000000052154064, 0.00800000037997961,
                   0.003000000026077032, 0.006000000052154064, 0.010999999940395355,
                   0.014999999664723873, 0.006000000052154064, 0.003000000026077032]
    jdkData = [2452782.464, 2452804.42, 2452809.362, 2452832.386, 2452834.364, 2452836.41,
               2452839.441, 2452840.408, 2452841.368, 2452842.364, 2452843.336, 2452866.316,
               2452867.36, 2452869.324, 2452891.322, 2452892.295, 2453193.376, 2453194.455,
               2453214.33, 2453215.402, 2453216.367, 2453217.39, 2453218.361, 2453219.365,
               2453222.289, 2453223.357, 2453224.375, 2453225.323, 2453226.315, 2453283.207,
               2453307.168, 2453311.16, 2453486.5]
    kmagData = [3.621000051498413, 3.005000114440918, 3.1640000343322754, 3.2660000324249268,
                3.4709999561309814, 3.059999942779541, 3.3440001010894775, 3.50600004196167,
                3.1760001182556152, 3.052999973297119, 3.0160000324249268, 3.496000051498413,
                3.180000066757202, 3.006999969482422, 3.3940000534057617, 3.509999990463257,
                3.0429999828338623, 3.24399995803833, 3.299999952316284, 3.5220000743865967,
                3.319999933242798, 3.117000102996826, 3.0429999828338623, 3.0999999046325684,
                3.6440000534057617, 3.243000030517578, 3.0769999027252197, 3.115999937057495,
                3.1489999294281006, 3.0399999618530273, 3.253000020980835, 3.2899999618530273,
                3.3489999771118164]
    kmagErrData = [0.02199999988079071, 0.004999999888241291, 0.004999999888241291,
                   0.00800000037997961, 0.004999999888241291, 0.007000000216066837,
                   0.003000000026077032, 0.004999999888241291, 0.0020000000949949026,
                   0.004999999888241291, 0.003000000026077032, 0.0020000000949949026,
                   0.003000000026077032, 0.003000000026077032, 0.004999999888241291,
                   0.0020000000949949026, 0.004000000189989805, 0.009999999776482582,
                   0.006000000052154064, 0.009999999776482582, 0.004999999888241291,
                   0.013000000268220901, 0.010999999940395355, 0.008999999612569809,
                   0.00800000037997961, 0.006000000052154064, 0.004999999888241291,
                   0.006000000052154064, 0.007000000216066837, 0.006000000052154064,
                   0.014000000432133675, 0.010999999940395355, 0.006000000052154064]
    jdlData = [2452782.466, 2452804.421, 2452809.363, 2452832.387, 2452834.365, 2452836.41,
               2452839.442, 2452840.408, 2452841.369, 2452842.365, 2452843.336, 2452866.317,
               2452867.361, 2452869.325, 2452891.322, 2452892.296, 2453193.377, 2453194.457,
               2453214.331, 2453215.403, 2453216.368, 2453217.391, 2453218.362, 2453219.367,
               2453222.291, 2453223.358, 2453224.376, 2453225.323, 2453226.316, 2453283.209,
               2453307.169, 2453311.161, 2453486.501]
    lmagData = [3.315999984741211, 2.746999979019165, 2.877000093460083, 3.0179998874664307,
                3.1649999618530273, 2.7850000858306885, 3.072999954223633, 3.256999969482422,
                2.9159998893737793, 2.7690000534057617, 2.75, 3.23799991607666,
                2.9489998817443848, 2.763000011444092, 3.171999931335449, 3.249000072479248,
                2.809999942779541, 3.0160000324249268, 3.0869998931884766, 3.2739999294281006,
                2.9730000495910645, 2.8340001106262207, 2.812000036239624, 2.8499999046325684,
                3.322000026702881, 2.9769999980926514, 2.821000099182129, 2.8570001125335693,
                2.9019999504089355, 2.7639999389648438, 3.046999931335449, 2.999000072479248,
                3.0869998931884766]
    lmagErrData = [0.02199999988079071, 0.013000000268220901, 0.010999999940395355,
                   0.009999999776482582, 0.009999999776482582, 0.007000000216066837,
                   0.012000000104308128, 0.007000000216066837, 0.007000000216066837,
                   0.008999999612569809, 0.009999999776482582, 0.008999999612569809,
                   0.012000000104308128, 0.013000000268220901, 0.009999999776482582,
                   0.00800000037997961, 0.009999999776482582, 0.02800000086426735,
                   0.009999999776482582, 0.013000000268220901, 0.008999999612569809,
                   0.008999999612569809, 0.012000000104308128, 0.023000000044703484,
                   0.014000000432133675, 0.008999999612569809, 0.007000000216066837,
                   0.007000000216066837, 0.009999999776482582, 0.023000000044703484,
                   0.04100000113248825, 0.010999999940395355, 0.006000000052154064]
    jdmData = [2452782.476, 2452804.424, 2452809.366, 2452832.389, 2452834.37, 2452836.413,
               2452839.445, 2452840.411, 2452841.372, 2452842.37, 2452843.339, 2452866.321,
               2452867.364, 2452869.328, 2452891.326, 2452892.299, 2453193.381, 2453194.461,
               2453214.335, 2453215.406, 2453216.372, 2453217.394, 2453218.366, 2453219.371,
               2453222.297, 2453223.362, 2453224.38, 2453225.336, Float.NaN, 2453283.214, 2453307.174,
               2453311.166, 2453486.506]
    mmagData = [3.3350000381469727, 2.7090001106262207, 2.7939999103546143,
                2.9579999446868896, 3.1040000915527344, 2.7149999141693115,
                3.0759999752044678, 3.1600000858306885, 2.874000072479248, 2.7279999256134033,
                2.7720000743865967, 3.1540000438690186, 2.8610000610351562,
                2.6710000038146973, 3.125999927520752, 3.178999900817871, 2.7839999198913574,
                3.059000015258789, 3.0490000247955322, 3.1740000247955322, 3.069000005722046,
                2.8369998931884766, 2.8440001010894775, 2.865000009536743, 3.325000047683716,
                2.997999906539917, 2.806999921798706, 2.867000102996826, Float.NaN,
                2.7730000019073486, 2.9749999046325684, 2.937999963760376, 2.994999885559082]
    mmagErrData = [0.054999999701976776, 0.019999999552965164, 0.03500000014901161,
                   0.03700000047683716, 0.03099999949336052, 0.017999999225139618,
                   0.028999999165534973, 0.02800000086426735, 0.01899999938905239,
                   0.02500000037252903, 0.019999999552965164, 0.03200000151991844,
                   0.020999999716877937, 0.027000000700354576, 0.017000000923871994,
                   0.026000000536441803, 0.02800000086426735, 0.07800000160932541,
                   0.028999999165534973, 0.03700000047683716, 0.04100000113248825,
                   0.03700000047683716, 0.032999999821186066, 0.023000000044703484,
                   0.027000000700354576, 0.028999999165534973, 0.02199999988079071,
                   0.020999999716877937, Float.NaN, 0.041999999433755875, 0.03700000047683716,
                   0.032999999821186066, 0.020999999716877937]

    nameData = ['beta Lyr'] * 33

    ra = 282.51998020
    dec = 33.36266944
    raDecErr = 0.000278

    instance(id: "_TT_FRAME", type: "coords:domain.temporal.TimeFrame") {
        instance(role: "refPosition", type: "coords:domain.spatial.StdRefLocation") {
            instance role: "position", value: "BARYCENTER"
        }
        instance role: "timescale", value: "TT"
    }

    instance(id: "_ICRS_FRAME", type: "coords:domain.spatial.SpaceFrame") {
        instance role: "spaceRefFrame", value: "ICRS"
        instance(role: "refPosition", type: "coords:domain.spatial.StdRefLocation") {
            instance role: "position", value: "BARYCENTER"
        }
    }

    instance(type: "cube:SparseCube") {
        composition role: "data", ref: "_DATA_INSTANCE"
    }

    instance(id: "_SHENAVRIN", type: "ds:party.Individual") {
        instance role: "name", value: "Shenavrin"
    }

    instance(id: "_VIZIER", type: "ds:party.Organization") {
        instance role: "name", value: "CDS VizieR"
    }

    table(id: "_DATA_TABLE") {
        instance(type: "ds:experiment.ObsDataset") {
            instance role: "dataProductType", value: "TIMESERIES"

            instance role: "calibLevel", value: 1

            instance(role: "target", type: "ds:experiment.Target") {
                column role: "name", id: "_TARGET_NAME", data = nameData
            }

            instance(role: "dataID") {

                instance(role: "creator") {
                    reference role: "party", idref: "_SHENAVRIN"
                }

                instance(role: "contributor") {
                    reference role: "party", idref: "_VIZIER"
                }
            }

            instance(role: "curation") {
                instance role: "publisherDID", value: "test:TestTimeSeries"
            }
        }

        instance(id: "_DATA_INSTANCE", type: "cube:NDPoint") {

            // POSITION (constant for all
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:SkyPosition") {
                    reference(role: "coordFrame") {
                        // This could be a standard URI, rather...
                        idref "_ICRS_FRAME"
                    }

                    instance (role: "coord", type: "coords:domain.spatial.CelestialCoord") {
                        instance role: "ra", value: ra
                        instance role: "dec", value: dec
                    }

                    instance (role: "error", type: "meas:BasicError2D") {
                        instance (role: "statError", type: "meas:Symmetrical2D") {
                            instance role: "radius", value: raDecErr
                        }
                    }
                }
            }

            // ############# Start Band H instances ################

            // Band H Time
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:StdTimeMeasure") {
                    reference role: "coordFrame", idref: "_TT_FRAME"

                    instance(role: "coord", type: "coords:domain.temporal.JD") {
                        column role: "date", id:"_col_H_TIME", data: jdhData, unit: "d", name: "h_time"
                    }
                }
            }

            // Band H Magnitude and Error
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "True"

                instance(role: "instance", type: "meas:GenericCoordMeasure") {
                    // Implicit topocenter frame reference
                    instance(role: "coord", type: "coords:GenericCoordValue") {
                        column role: "cval", id: "_col_H_MAG", type: "ivoa:RealQuantity", data: hmagData, unit: "mag",
                                name: "h_mag"
                        // Implicit standard 1d axis reference
                    }
                    instance(role: "error", type: "meas:BasicError1D") {
                        instance(role: "statError", type: "meas:Symmetrical1D") {
                            column role: "radius", id: "_col_H_MAG_ERROR", type: "ivoa:RealQuantity", data: hmagErrData,
                                    unit: "mag"
                        }
                    }
                }
            }

            // ############# End Band H instances ################

            // ############# Start Band J instances ################

            // Band J Time
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:StdTimeMeasure") {
                    reference role: "coordFrame", idref: "_TT_FRAME"

                    instance(role: "coord", type: "coords:domain.temporal.JD") {
                        column role: "date", id:"_col_J_TIME", data: jdjData, unit: "d", name: "j_time"
                    }
                }
            }

            // Band J Magnitude and Error
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "True"

                instance(role: "instance", type: "meas:GenericCoordMeasure") {
                    // Implicit topocenter frame reference
                    instance(role: "coord", type: "coords:GenericCoordValue") {
                        column role: "cval", id: "_col_J_MAG", type: "ivoa:RealQuantity", data: jmagData, unit: "mag",
                                name: "j_mag"
                        // Implicit standard 1d axis reference
                    }
                    instance(role: "error", type: "meas:BasicError1D") {
                        instance(role: "statError", type: "meas:Symmetrical1D") {
                            column role: "radius", id: "_col_J_MAG_ERROR", type: "ivoa:RealQuantity", data: jmagErrData,
                                    unit: "mag"
                        }
                    }
                }
            }

            // ############# End Band J instances ################

            // ############# Start Band K instances ################

            // Band K Time
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:StdTimeMeasure") {
                    reference role: "coordFrame", idref: "_TT_FRAME"

                    instance(role: "coord", type: "coords:domain.temporal.JD") {
                        column role: "date", id:"_col_K_TIME", data: jdkData, unit: "d", name: "k_time"
                    }
                }
            }

            // Band K Magnitude and Error
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "True"

                instance(role: "instance", type: "meas:GenericCoordMeasure") {
                    // Implicit topocenter frame reference
                    instance(role: "coord", type: "coords:GenericCoordValue") {
                        column role: "cval", id: "_col_K_MAG", type: "ivoa:RealQuantity", data: kmagData, unit: "mag",
                                name: "k_mag"
                        // Implicit standard 1d axis reference
                    }
                    instance(role: "error", type: "meas:BasicError1D") {
                        instance(role: "statError", type: "meas:Symmetrical1D") {
                            column role: "radius", id: "_col_K_MAG_ERROR", type: "ivoa:RealQuantity", data: kmagErrData,
                                    unit: "mag"
                        }
                    }
                }
            }

            // ############# End Band K instances ################

            // ############# Start Band L instances ################

            // Band L Time
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:StdTimeMeasure") {
                    reference role: "coordFrame", idref: "_TT_FRAME"

                    instance(role: "coord", type: "coords:domain.temporal.JD") {
                        column role: "date", id:"_col_L_TIME", data: jdlData, unit: "d", name: "l_time"
                    }
                }
            }

            // Band L Magnitude and Error
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "True"

                instance(role: "instance", type: "meas:GenericCoordMeasure") {
                    // Implicit topocenter frame reference
                    instance(role: "coord", type: "coords:GenericCoordValue") {
                        column role: "cval", id: "_col_L_MAG", type: "ivoa:RealQuantity", data: lmagData, unit: "mag",
                                name: "l_mag"
                        // Implicit standard 1d axis reference
                    }
                    instance(role: "error", type: "meas:BasicError1D") {
                        instance(role: "statError", type: "meas:Symmetrical1D") {
                            column role: "radius", id: "_col_L_MAG_ERROR", type: "ivoa:RealQuantity", data: lmagErrData,
                                    unit: "mag"
                        }
                    }
                }
            }

            // ############# End Band L instances ################

            // ############# Start Band M instances ################

            // Band M Time
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "False"

                instance(role: "instance", type: "meas:StdTimeMeasure") {
                    reference role: "coordFrame", idref: "_TT_FRAME"

                    instance(role: "coord", type: "coords:domain.temporal.JD") {
                        column role: "date", id:"_col_M_TIME", data: jdmData, unit: "d", name: "m_time"
                    }
                }
            }

            // Band M Magnitude and Error
            instance(role: "axis", type: "cube:Observable") {
                instance role: "dependent", value: "True"

                instance(role: "instance", type: "meas:GenericCoordMeasure") {
                    // Implicit topocenter frame reference
                    instance(role: "coord", type: "coords:GenericCoordValue") {
                        column role: "cval", id: "_col_M_MAG", type: "ivoa:RealQuantity", data: mmagData, unit: "mag",
                                name: "m_mag"
                        // Implicit standard 1d axis reference
                    }
                    instance(role: "error", type: "meas:BasicError1D") {
                        instance(role: "statError", type: "meas:Symmetrical1D") {
                            column role: "radius", id: "_col_M_MAG_ERROR", type: "ivoa:RealQuantity", data: mmagErrData,
                                    unit: "mag"
                        }
                    }
                }
            }

            // ############# End Band M instances ################
        }
    }
}
